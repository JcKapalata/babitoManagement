<div class="container">
  <div class="header">
    <h2>Stock Épuisés</h2>
  </div>

  <div class="main">
    @if (dataSource ) {
      
      <div class="table-wrapper">
        <cdk-virtual-scroll-viewport itemSize="70" class="viewport">
          <table class="rupture-table">
            <thead>
              <tr>
                <th style="width: 80px;">Id</th>
                <th>Produit</th>
                <th style="width: 100px;">Taille</th>
                <th style="width: 150px;">Couleur</th>
                <th style="width: 120px;">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *cdkVirtualFor="let item of dataSource" class="table-row">
                
                <td>
                  <span>{{ item ? item.produitId : '...' }}</span>
                </td>

                <td>
                  @if (item) {
                    <div class="product-info">
                      <img [src]="item.image || 'assets/placeholder.png'" class="thumb" loading="lazy">
                      <strong>{{ item.nomProduit }}</strong>
                    </div>
                  } @else {
                    <div class="skeleton-text">Chargement...</div>
                  }
                </td>

                <td>
                  @if (item) {
                    <span class="badge-taille">{{ item.taille }}</span>
                  } @else {
                    <span>...</span>
                  }
                </td>

                <td>
                  {{ item ? item.couleur : '...' }}
                </td>

                <td>
                  @if (item) {
                    <button class="btn-manage" (click)="goToDetailProduit(item.produitId)">
                      Gérer
                    </button>
                  }
                </td>

              </tr>
            </tbody>
          </table>
        </cdk-virtual-scroll-viewport>
      </div>

    } @else {
      <div class="loading-container">
        <app-loading></app-loading>
      </div>
    }
  </div>
</div>